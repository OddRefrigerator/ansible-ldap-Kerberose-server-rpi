[kdcdefaults]
    kdc_ports = 750,88

[realms]
    {{ krb5realm|upper() }} = {
        database_name = /var/lib/krb5kdc/principal
        admin_keytab = FILE:/etc/krb5kdc/kadm5.keytab
        acl_file = /etc/krb5kdc/kadm5.acl
        key_stash_file = /etc/krb5kdc/stash
        kdc_ports = 750,88
        max_life = 10h 0m 0s
        max_renewable_life = 7d 0h 0m 0s
        master_key_type = aes256-cts-hmac-sha1-96
        supported_enctypes = aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal
        database_module = openldap_ldapconf
    }

[logging]
 default = FILE:/var/lib/krb5kdc/krb5-default.log
 kdc = CONSOLE
 kdc = FILE:/var/lib/krb5kdc/krb5-kdc.log
 admin_server = CONSOLE
 admin_server = FILE:/var/lib/krb5kdc/krb5-admin.log

[dbdefaults]
    ldap_kerberos_container_dn = cn=krbcontainer,{{ ldapBaseDN }}

[dbmodules] 
 openldap_ldapconf = {
     db_library = kldap
     disable_last_success = true
     disable_lockout = true
     ldap_kerberos_container_dn = cn=krbcontainer,{{ ldapBaseDN }}
     ldap_kdc_dn = "cn=krb5-kdc,{{ ldapBaseDN }}"
     ldap_kadmind_dn = "cn=krb5-admin,{{ ldapBaseDN }}"
     ldap_servers = ldapi:///
     ldap_service_password_file = /etc/krb5kdc/ldapservice.keyfile
     ldap_conns_per_server = 5
  }

